<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ps - ox0spy&#39;s blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="crazygit" />
  <meta name="description" content="本文参考： 10 basic examples of Linux ps command http://man.linuxde.net/ps 作用 ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些" />

  <meta name="keywords" content="ox0spy, python, flask, django, go, golang, programming, coding, even" />



<meta name="google-site-verification" content="ClLKCL5AmIdaPZLA6ES3w676yZlC8RUUmKgPMHZkI0E" />


<meta name="generator" content="Hugo 0.32-DEV" />


<link rel="canonical" href="https://ox0spy.github.io/post/linux-commands/ps/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/even.min.css?v=2.7.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">

<meta property="og:title" content="ps" />
<meta property="og:description" content="本文参考： 10 basic examples of Linux ps command http://man.linuxde.net/ps 作用 ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ox0spy.github.io/post/linux-commands/ps/" />



<meta property="article:published_time" content="2017-12-15T19:21:57&#43;08:00"/>

<meta property="article:modified_time" content="2017-12-15T19:21:57&#43;08:00"/>











<meta itemprop="name" content="ps">
<meta itemprop="description" content="本文参考： 10 basic examples of Linux ps command http://man.linuxde.net/ps 作用 ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些">


<meta itemprop="datePublished" content="2017-12-15T19:21:57&#43;08:00" />
<meta itemprop="dateModified" content="2017-12-15T19:21:57&#43;08:00" />
<meta itemprop="wordCount" content="2643">



<meta itemprop="keywords" content="linux, command, ps," />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="ps"/>
<meta name="twitter:description" content="本文参考： 10 basic examples of Linux ps command http://man.linuxde.net/ps 作用 ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">ox0spy&#39;s blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">ox0spy&#39;s blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ps</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-12-15 </span>
        <div class="post-category">
            
              <a href="/categories/linux-commands/"> linux-commands </a>
            
          </div>
        <span class="more-meta"> 约 2643 字 </span>
        <span class="more-meta"> 预计阅读 6 分钟 </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#作用">作用</a></li>
<li><a href="#参数形式">参数形式</a></li>
<li><a href="#使用示例">使用示例</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<p>本文参考：</p>

<ul>
<li><a href="http://www.binarytides.com/linux-ps-command/">10 basic examples of Linux ps command</a></li>
<li><a href="http://man.linuxde.net/ps">http://man.linuxde.net/ps</a></li>
</ul>

<h2 id="作用">作用</h2>

<p>ps命令用来列出系统中当前运行的那些进程。ps命令列出的是当前那些进程的快照，就是执行ps命令的那个时刻的那些进程，如果想要动态的显示进程信息，可以使用top命令
。</p>

<h2 id="参数形式">参数形式</h2>

<ul>
<li>Unix风格的参数，前面加单破折线</li>
<li>BSD风格的参数， 前面不加破折线</li>
<li>GNU风格的长参数，前面加双破折线</li>
</ul>

<p>不同风格的参数可以混合使用, 但是要注意避免冲突。</p>

<p>如:</p>

<p>命令<code>ps -aux</code>和<code>ps aux</code>是不一样的。<code>ps -aux</code>是显示所有&rsquo;x&rsquo;用户的进程, 如果用户&rsquo;x&rsquo;不存在的话，会给出警告，并当做<code>ps aux</code>来处理。</p>

<h2 id="使用示例">使用示例</h2>

<ol>
<li><p>显示所有进程</p>

<pre><code>:::bash
$ ps aux
$ ps -ef
</code></pre></li>

<li><p>显示指定用户的进程</p>

<pre><code>:::bash
$ ps -f -u www-data

# 多个用户用','隔开
$ ps -f -u www-data,root
</code></pre></li>

<li><p>按照进程名来指定</p>

<pre><code>:::bash
$ ps -C nginx
</code></pre>

<p>-C 选项必须提供精确的进程名，不提供模糊匹配，一般使用grep来搜索</p>

<pre><code>:::bash
$ ps -ef |grep nginx
</code></pre></li>

<li><p>按照进程id来查找</p>

<pre><code>:::bash
$ ps -f -p 3150,7298,6455
</code></pre></li>

<li><p>按照CPU或内存使用情况排序</p>

<p>使用&ndash;sort选项可以按照一定的顺序排序，并且可以在指定的排序列前添加&rsquo;-&lsquo;或&rsquo;+&rsquo; 来指定降序或升序排列</p>

<pre><code>:::bash
# cpu 使用前５
$ ps aux --sort=-pcpu | head -5

# 内存 使用前５
$ ps aux --sort=-pmem | head -5

# 指定多个排序
$ ps jax --sort=uid,-ppid,+pid
</code></pre>

<p>排序选项参见man page <code>STANDARD FORMAT SPECIFIERS</code>部分</p>

<p>部分选项列出如下
<pre>
cmd          simple name of executable
pcpu         cpu utilization
pmem         ratio of the process&rsquo;s resident set size to the
            physical memory on the machine, expressed as a
            percentage
flags        flags as in long format F field
pgrp         process group ID
tpgid        controlling tty process group ID
cutime       cumulative user time
cstime       cumulative system time
utime        user time
min_flt      number of minor page faults
maj_flt      number of major page faults
cmin_flt     cumulative minor page faults
cmaj_flt     cumulative major page faults
session      session ID
pid          process ID
ppid         parent process ID
rss          resident set size
resident     resident pages
size         approximate amount of swap space that would be
            required if the process were to dirty all writable
            pages and then be swapped out. This number is
            very rough!
share        amount of shared pages
tty          the device number of the controlling tty
start_time   time process was started
uid          user ID number
user         user name
vsize        total VM size in kB
priority     kernel scheduling priority
</pre></p></li>

<li><p>按照树状结构显示</p>

<p>使用<code>--forest</code>选项</p>

<pre><code>:::bash
$ ps -f --forest -C nginx
UID        PID  PPID  C STIME TTY          TIME CMD
root      1344     1  0  2014 ?        00:00:00 nginx: master process /usr/sbin/nginx
www-data  1345  1344  0  2014 ?        00:01:52  \_ nginx: worker process
www-data  1346  1344  0  2014 ?        00:02:05  \_ nginx: worker process
www-data  1348  1344  0  2014 ?        00:02:00  \_ nginx: worker process
www-data  1349  1344  0  2014 ?        00:01:04  \_ nginx: worker process
</code></pre>

<p>不要把<code>--forest</code>和<code>--sort</code>选项混合使用，因为他们都会影响结果</p></li>

<li><p>列出子进程</p>

<pre><code>:::bash
＃先列出所有nginx进程
$ ps -o pid,uname,comm -C nginx
PID USER     COMMAND
1344 root     nginx
1345 www-data nginx
1346 www-data nginx
1348 www-data nginx
1349 www-data nginx

# 使用--ppid选项列出子进程
$ ps --ppid 2359
PID TTY          TIME CMD
4524 ?        00:00:00 apache2
4525 ?        00:00:00 apache2
4526 ?        00:00:00 apache2
4527 ?        00:00:00 apache2
4528 ?        00:00:00 apache2
</code></pre></li>

<li><p>列出进程的线程</p>

<p>使用<code>-L</code>选项</p>

<pre><code>:::bash
$ ps -p 3150 -L
</code></pre></li>

<li><p>指定输出结果的列</p>

<p>可以输出的列信息与<code>--sort</code>选项一样，可以查看man page 的<code>STANDARD FORMAT SPECIFIERS</code>部分</p>

<pre><code>:::bash
$ ps -e -o pid,uname,pcpu,pmem,comm

# 显示指定的列并给出别名
$ ps -e -o pid,uname=USERNAME,pcpu=CPU_USAGE,pmem,comm
</code></pre></li>

<li><p>将ps转变为实时更新的效果</p>

<pre><code>:::bash
$  watch -n 1 'ps -e -o pid,uname,cmd,pmem,pcpu --sort=-pmem,-pcpu | head -15'
</code></pre></li>

<li><p>列出僵尸进程</p>

<pre><code>:::bash
$ ps -A -o stat,ppid,pid,cmd |grep -e '^[Zz]'
$ ps -ef | grep defunct | grep -v grep
</code></pre></li>

<li><p>指定用户, 程序的CPU和内存使用情况统计</p>

<pre><code>:::bash
# redis用户所使用的cpu和内存信息统计
$ ps --no-headers -u redis -o pcpu,pmem,command | awk '{cpu += $1; pmem += $2} END {print cpu, pmem}'
# 查看只是监听在6000端口的redis使用cpu和内存信息
$ ps --no-headers -u redis -o pcpu,pmem,command | grep 6000 | awk '{cpu += $1; pmem += $2} END {print cpu, pmem}'
</code></pre></li>

<li><p>部分选项解释</p></li>
</ol>

<pre>
-a： 显示所有终端机下执行的程序，除了阶段作业领导者之外。
a：  显示现行终端机下的所有程序，包括其他用户的程序。
-A： 显示所有程序。
-c： 显示CLS和PRI栏位。
c：  列出程序时，显示每个程序真正的指令名称，而不包含路径，选项或常驻服务的标示。
-C<指令名称>： 指定执行指令的名称，并列出该指令的程序的状况。
-d： 显示所有程序，但不包括阶段作业领导者的程序。
-e： 此选项的效果和指定"A"选项相同。
e：  列出程序时，显示每个程序所使用的环境变量。
-f： 显示UID,PPIP,C与STIME栏位。
f：  用ASCII字符显示树状结构，表达程序间的相互关系。
-g<群组名称>： 此选项的效果和指定"-G"选项相同，当亦能使用阶段作业领导者的名称来指定。
g：  显示现行终端机下的所有程序，包括群组领导者的程序。 -G<群组识别码>：列出属于该群组的程序的状况，也可使用群组名称来指定。
h：  不显示标题列。
-H： 显示树状结构，表示程序间的相互关系。
-j或j： 采用工作控制的格式显示程序状况。
-l或l： 采用详细的格式来显示程序状况。
L：  列出栏位的相关信息。
-m或m： 显示所有的执行绪。
n：  以数字来表示USER和WCHAN栏位。
-N： 显示所有的程序，除了执行ps指令终端机下的程序之外。
-p<程序识别码>： 指定程序识别码，并列出该程序的状况。
p<程序识别码>：  此选项的效果和指定"-p"选项相同，只在列表格式方面稍有差异。
r：  只列出现行终端机正在执行中的程序。
-s<阶段作业>：   指定阶段作业的程序识别码，并列出隶属该阶段作业的程序的状况。
s：  采用程序信号的格式显示程序状况。
S：  列出程序时，包括已中断的子程序资料。
-t<终端机编号>：  指定终端机编号，并列出属于该终端机的程序的状况。
t<终端机编号>：   此选项的效果和指定"-t"选项相同，只在列表格式方面稍有差异。
-T：   显示现行终端机下的所有程序。
-u<用户识别码>：  此选项的效果和指定"-U"选项相同。
u：  以用户为主的格式来显示程序状况。
-U<用户识别码>：  列出属于该用户的程序的状况，也可使用用户名称来指定。
U<用户名称>：  列出属于该用户的程序的状况。
v：  采用虚拟内存的格式显示程序状况。
-V或V：  显示版本信息。
-w或w：  采用宽阔的格式来显示程序状况。　
x：  显示所有程序，不以终端机来区分。
X：  采用旧式的Linux i386登陆格式显示程序状况。
-y：  配合选项"-l"使用时，不显示F(flag)栏位，并以RSS栏位取代ADDR栏位　。
-<程序识别码>：  此选项的效果和指定"p"选项相同。
--cols<每列字符数>：  设置每列的最大字符数。
--columns<每列字符数>：  此选项的效果和指定"--cols"选项相同。
--cumulative：  此选项的效果和指定"S"选项相同。
--deselect：  此选项的效果和指定"-N"选项相同。
--forest：  此选项的效果和指定"f"选项相同。
--headers：  重复显示标题列。
--help：  在线帮助。
--info：  显示排错信息。
--lines<显示列数>：  设置显示画面的列数。
--no-headers：  此选项的效果和指定"h"选项相同，只在列表格式方面稍有差异。
--group<群组名称>：  此选项的效果和指定"-G"选项相同。
--Group<群组识别码>：  此选项的效果和指定"-G"选项相同。
--pid<程序识别码>：  此选项的效果和指定"-p"选项相同。
--rows<显示列数>：  此选项的效果和指定"--lines"选项相同。
--sid<阶段作业>：  此选项的效果和指定"-s"选项相同。
--tty<终端机编号>：  此选项的效果和指定"-t"选项相同。
--user<用户名称>：  此选项的效果和指定"-U"选项相同。
--User<用户识别码>：  此选项的效果和指定"-U"选项相同。
--version：  此选项的效果和指定"-V"选项相同。
--widty<每列字符数>：  此选项的效果和指定"-cols"选项相同。
</pre>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">crazygit</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2017-12-15</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/ox0spy-wechat.png">
        <span>微信打赏</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/ox0spy-alipay.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/linux/">linux</a>
          
          <a href="/tags/command/"> command</a>
          
          <a href="/tags/ps/"> ps</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/configuration/nginx-config/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">nginx获取客户端真实ip，x-real-ip和x-forwarded-for注意</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/configuration/saltstack/">
            <span class="next-text nav-default">saltstack介绍</span>
            <span class="prev-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'ox0spy';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com/" class="dsq-brlink" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>

  
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:ox0spy@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/ox0spy" class="iconfont icon-github" title="github"></a>
  <a href="https://ox0spy.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    &copy; 
    
      2017 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">ox0spy</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.min.js?v=2.7.0"></script>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-42986901-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>



</body>
</html>
